<html lang="en">
  <head>
    <title>IC (Interactive Content) Specification</title>
  </head>
  <body style="margin: 0px;" class="vsc-initialized">
    <h1>IC (Interactive Content) Specification</h1>
    <h2>Version 1</h2>
    <hr>

    <h2>2. File Structure</h2>

    <p>This chapter discusses the how IC files are structured and the different
      types of four types of Components supported by Interactive Content: Layouts,
      Containers, Actions, and Content. Specific Content types are covered in the next chapter.
    </p>
    <h3>2.1. File Header</h3>
    <p>Layouts define the positions of elements</p>
    <h3>2.2. Components</h3>
    <h4>2.2.1. Layouts</h4>
    <p>Layouts define the positions of elements</p>
    <pre>
  (Layout ID - 16 bits)     011 xxxxx xxxxxxxx [x bits are the Layout ID]
  (Number of elements)      xxxxxxxx
  {Element N}
    (Position X)            XX XX [2 bytes, int from 0-40,000]
    (Position Y)            XX XX [2 bytes, int from 0-40,000]
    (Position Width)        XX XX [2 bytes, int from 0-40,000]
    (Position Height)       XX XX [2 bytes, int from 0-40,000]
    (Style ID)              XX XX [2 bytes, Style to apply to this element]
    (Infinite Byte)         0000wxyz
      w bit - show page numbers (?)
      x bit - enable paging (1 for paging), paging means only multiples of the width/height of the element are shown at a time
      y bit - direction of infinite expansion. 0 for horizontal, 1 for vertical.
      z bit - set this bit to 1 to support infinite sub elements
        if z bit = 1, the positioning bytes below must be defined
    {if z = 1}
      (Start X)             XX XX [2 bytes, int from 0-40,000]
      (Start Y)             XX XX [2 bytes, int from 0-40,000]
      (Width of each ele)   XX XX [2 bytes, int from 0-40,000]
      (Height of each ele)  XX XX [2 bytes, int from 0-40,000]
      (Padding btwn ele)    XX XX [2 bytes, int from 0-40,000, uses y bit direction to decide to multiply by width or height]
    </pre>
    <h4>2.2.3. Actions</h4>
    <p>Actions are the core of Interactive Content and is what enables content to
    be interactive. There are three types of Actions: Links, Replacement, and Appending (?)</p>
    <p>Link Actions replace the highest level container with the container specified if not a tooltip. Links can only link to Containers</p>
    <p>Replacement Actions replace the specified Element with another Element. An Element refers to either a Container or Content</p>
    <pre>
  (Action ID - 16 Bits)     100 xxxxx xxxxxxxx [x bits are the Action ID]
  (Action Type - 4 bits)    xxxx
    (Type: Link)            0001
    (Type: Replacement)     0010
  {Type: Link}
    (Link To Container ID)  001 xxxxx xxxxxxxx [x bits are Container ID]
    (Display Mode Byte)     000VWXYZ
      V bit: Show this container as a tooltip. The display of the tooltip is left to the reader.
      W bit: Allow showing a back button to return to the container before the Link was pressed.
      XYZ bits: Defines how many sublevels of Containers that should be shown from the linked Container.
      The highest level Container that is chosen is what is displayed (since it will always
      contain the linked Container)
        000: Show only the linked Container, even if the Container is inside a subcontainer
        001: Show the linked Container and the parent Container.
        010: The linked Container, with its parent and grandparent Container.
        ...
        110: Show the 6th parent Container from the linked Container.
        111: Show the highest Container ancestor possible.
  {Type: Replacement}
    (Replace Element ID)    (001/010) xxxxx xxxxxxxx [ID of either a Container or Content to replace. Must be currently visable]
    (Replace with ID)       (001/010) xxxxx xxxxxxxx [ID of either a Container or Content.]

    </pre>

    <h4>2.2.4. Content</h4>
    <p>Content is the foundation of what is displyed to the user. All Content belongs to a Container</p>
    <h4>2.2.5. Style</h4>
    <p>Style contorls how a certain component looks. Styles themselves are generic and do nothing themselves. They must
    be part of other components in order to be applied. Styles can only apply to Layout and Content. <br>When applying a
    style to a Layout, the style applies to the entire Component (which will ultimately be a Component or Content). This can
    be used to apply border outlines and outline colors to the Components themselves.<br>Styles can also be applied within
    Content. The way Content uses Styles depends on the type of Content. For example, a Fancy Text content can use Styles
    to Style the text (font, color, size, etc.)</p>
    <pre>
  (Style ID - 16 bits)        101 xxxxx xxxxxxxx [x bits are Style ID]

  ** From here on, everything is an Key Value pair.     **
  ** Each key is one byte, and each Value length        **
  ** depends on the key. The format of below is:        **
  ** (Key Type)               (XX) - xxxxxxxx           **
  **  (Key Value)             [variable bytes,in hex]   **
  ** Not all keys have values (such as text styles)     **
  ** Key value of 00 ends the style                     **
  ** If the first bit in a style key is 1, then the key **
  ** is two bytes in length instead of one (to allow    **
  ** for more styles in the future)                     **
  ** The following are categorized only visually        **
  ** but style keys are still unique between categories **

  Styles that apply to the component as a whole:
  (Border Width)            01 - 00000001
    (Border Width Value)    03 E8 - (Value) / 40,000, as a percent of the width of Window
  (Border Color)            02 - 00000002
    (Border Color Value)    00 00 00 - Color in hex
  (Window Background Color) 03 - 00000003
    (Background Color Value)00 00 00 - color in hex

  Text styles:
  (Font Name)               10
    (Font name value)       Null terminated string
  (Font Family)             11
    (Font family value)     Null terminated string
  (Text Color)              12
    (Text Color Value)    00 00 00 - Color in hex
  (Set Bold)                13
  (Set Italics)             14
  (Set Underline)           15
  (Set Strikethrough)       16
  (Set Superscript)         17
  (Set Subscript)           18
  (TODO: Paragraph styles)

  (End Style - 8 bits)        00000000
    </pre>
    <h3>2.3. Limits</h3>
    <p>The limits of most properties used throughout the other Components are defined below:</p>
    <pre>
ID Limits:
  There can be a max of 2^13 = 8,192 unique IDs for each component type.
  If the extended bit range is used (prefix 110), there is a max of 2^24 = 16,777,216 unique IDs for each Component type



    </pre>
    <hr>
    <a href="introduction.html">Previous page</a>
    <br>
    <a href="content.html">Next page</a>
    <br>
    <a href="index.html">Table of contents</a>
    <hr>
  </body>
</html>
